<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toyota MyT to ABRP - Dashboard</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <svg width="40" height="40" viewBox="0 0 40 40">
                    <circle cx="20" cy="20" r="18" fill="none" stroke="currentColor" stroke-width="2"/>
                    <path d="M12 20 L18 26 L28 14" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                </svg>
                <h1>Toyota MyT<span class="accent">2</span>ABRP</h1>
            </div>
            <nav>
                <button class="nav-btn active" onclick="showSection('dashboard')">Dashboard</button>
                <button class="nav-btn" onclick="showSection('alerts')">Alerts</button>
                <button class="nav-btn" onclick="showSection('analytics')">Analytics</button>
                <button class="nav-btn" onclick="showSection('settings')">Settings</button>
            </nav>
        </header>

        <!-- Main Dashboard -->
        <main id="dashboard" class="section active">
            <div class="grid">
                <!-- Vehicle Status Card -->
                <div class="card status-card">
                    <div id="vehicle-status">
                        <div class="loading">Loading vehicle status...</div>
                    </div>
                </div>

                <!-- Charging Status Card -->
                <div class="card charging-card">
                    <div id="charging-status">
                        <div class="loading">Loading charging status...</div>
                    </div>
                </div>

                <!-- Range Card -->
                <div class="card range-card">
                    <h2>Range Information</h2>
                    <div id="range-info">
                        <div class="loading">Calculating range...</div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card actions-card">
                    <h2>Quick Actions</h2>
                    <div class="actions">
                        <button class="action-btn"
                                data-action="start charging"
                                data-endpoint="/api/charging/start">
                            <span class="icon">üîå</span>
                            Start Charging
                        </button>
                        <button class="action-btn"
                                data-action="stop charging"
                                data-endpoint="/api/charging/stop">
                            <span class="icon">‚è∏Ô∏è</span>
                            Stop Charging
                        </button>
                        <button class="action-btn"
                                data-action="precondition"
                                data-endpoint="/api/precondition">
                            <span class="icon">‚ùÑÔ∏è</span>
                            Pre-Condition
                        </button>
                        <button class="action-btn">
                            <span class="icon">üó∫Ô∏è</span>
                            Plan Route
                        </button>
                    </div>
                </div>

                <!-- Charging History -->
                <div class="card history-card">
                    <h2>Recent Charging Sessions</h2>
                    <div id="charging-history">
                        <div class="loading">Loading history...</div>
                    </div>
                </div>

                <!-- Battery Health -->
                <div class="card health-card">
                    <h2>Battery Health</h2>
                    <div id="battery-health">
                        <div class="loading">Checking battery health...</div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Alerts Section -->
        <section id="alerts" class="section">
            <div class="section-header">
                <h2>Charging Alerts</h2>
            </div>

            <div class="alerts-container">
                <!-- Active Alerts -->
                <div class="card">
                    <h3>Active Alerts</h3>
                    <div id="active-alerts">
                        <div class="loading">Loading alerts...</div>
                    </div>
                </div>

                <!-- Alert Configuration -->
                <div class="card">
                    <h3>Alert Settings</h3>
                    <form data-api="/api/alerts/save">
                        <label>
                            <input type="checkbox" name="charge_complete" checked>
                            Notify when charging is complete (100%)
                        </label>

                        <label>
                            <input type="checkbox" name="optimal_charge" checked>
                            Notify at optimal charge level (80%)
                        </label>

                        <label>
                            Custom charge level:
                            <input type="range" name="custom_level" min="50" max="100" value="90"
                                   oninput="this.nextElementSibling.textContent = this.value + '%'">
                            <span class="value">90%</span>
                        </label>

                        <label>
                            <input type="checkbox" name="low_battery">
                            Low battery warning (below 20%)
                        </label>

                        <label>
                            <input type="checkbox" name="charging_slow">
                            Slow charging alert
                        </label>

                        <label>
                            <input type="checkbox" name="ready_for_trip">
                            Ready for trip notification
                        </label>

                        <button type="submit" class="btn-primary">Save Settings</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Analytics Section -->
        <section id="analytics" class="section">
            <h2>Charging Analytics</h2>
            <div class="grid analytics-grid">
                <!-- Weekly Stats -->
                <div class="card">
                    <div id="weekly-analytics">
                        <div class="loading">Loading weekly stats...</div>
                    </div>
                </div>

                <!-- Cost Analysis -->
                <div class="card">
                    <div id="cost-analytics">
                        <div class="loading">Loading cost analysis...</div>
                    </div>
                </div>

                <!-- Efficiency Metrics -->
                <div class="card">
                    <div id="efficiency-analytics">
                        <div class="loading">Loading efficiency metrics...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Settings Section -->
        <section id="settings" class="section">
            <h2>Settings</h2>
            <div class="settings-container">
                <div class="card">
                    <h3>Vehicle Configuration</h3>
                    <form data-api="/api/settings/vehicle">
                        <label>
                            VIN:
                            <input type="text" name="vin" placeholder="TESTVIN123456789">
                        </label>
                        <label>
                            Battery Capacity (kWh):
                            <input type="number" name="capacity" value="75">
                        </label>
                        <button type="submit" class="btn-primary">Save</button>
                    </form>
                </div>

                <div class="card">
                    <h3>API Configuration</h3>
                    <form data-api="/api/settings/api">
                        <label>
                            Toyota API Token:
                            <input type="password" name="toyota_token">
                        </label>
                        <label>
                            ABRP API Key:
                            <input type="password" name="abrp_key">
                        </label>
                        <button type="submit" class="btn-primary">Save</button>
                    </form>
                </div>

                <div class="card">
                    <h3>Notification Preferences</h3>
                    <form data-api="/api/settings/notifications">
                        <label>
                            <input type="checkbox" name="push_enabled" checked>
                            Enable push notifications
                        </label>
                        <label>
                            <input type="checkbox" name="email_enabled">
                            Enable email notifications
                        </label>
                        <label>
                            <input type="checkbox" name="sms_enabled">
                            Enable SMS notifications
                        </label>
                        <button type="submit" class="btn-primary">Save</button>
                    </form>
                </div>
            </div>
        </section>
    </div>

    <!-- Notification Toast -->
    <div id="notification" class="notification"></div>

    <script src="/app.js"></script>
</body>
</html>
